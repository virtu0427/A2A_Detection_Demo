<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A2A Multi-Agent 보안 모니터링 데모</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/vis-network/styles/vis-network.min.css"
    />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
  </head>
  <body>
    <header>
      <h1>A2A Multi-Agent 위협 탐지 센터</h1>
      <p>
        구글 A2A 프로토콜 기반 에이전트 간 통신을 실시간으로 감시하고, 위협 패턴을
        탐지하는 보안 모니터링 데모입니다.
      </p>
    </header>

    <main>
      <div class="grid-2">
        <section class="panel">
          <h2>
            실시간 에이전트 현황
            <span class="badge">Streaming Threat Intelligence</span>
          </h2>
          <p class="subtext">
            A2A 패킷 분석 결과를 기반으로 위험 이벤트를 즉시 수집하여 표시합니다.
            새로운 위협은 우측 상단 알림으로 확인할 수 있습니다.
          </p>
          <div class="log-list"></div>
        </section>

        <section class="panel">
          <h2>
            에이전트 그래프 뷰어
            <span>통신 관계 및 이상 징후</span>
          </h2>
          <div class="legend">
            <span><span class="dot normal"></span>정상 에이전트</span>
            <span><span class="dot warning"></span>주의 필요</span>
            <span><span class="dot isolated"></span>격리됨</span>
          </div>
          <div id="graph-container"></div>
          <div id="agent-detail" class="subtext" style="margin-top: 1rem;">
            그래프에서 에이전트나 연결선을 클릭하면 상세 정보를 확인할 수 있습니다.
          </div>
        </section>
      </div>

      <section class="panel">
        <h2>패킷 검색 · 분석 로그</h2>
        <p class="subtext">
          저장된 분석 결과에서 위협 유형, 심각도, 송수신 에이전트 등을 기준으로 빠르게
          필터링합니다.
        </p>
        <form class="filter-form">
          <label>
            위협 유형
            <input name="threat" placeholder="예: Task Replay" />
          </label>
          <label>
            심각도
            <select name="severity">
              <option value="">전체</option>
              <option value="높음">높음</option>
              <option value="중간">중간</option>
              <option value="낮음">낮음</option>
            </select>
          </label>
          <label>
            출발 에이전트
            <input name="source" placeholder="예: Atlas" />
          </label>
          <label>
            도착 에이전트
            <input name="target" placeholder="예: Hermes" />
          </label>
          <button type="submit">검색 실행</button>
        </form>

        <div class="table-wrapper">
          <table id="packet-table">
            <thead>
              <tr>
                <th>시간</th>
                <th>출발</th>
                <th>도착</th>
                <th>레이어</th>
                <th>위협</th>
                <th>심각도</th>
                <th>요약</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="7" style="text-align: center; padding: 1rem;">
                  조건을 선택하거나 검색을 실행해 주세요.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <div class="footer-note">
        데이터는 데모 목적의 샘플 DB를 사용합니다. A2A 프로토콜에 대한 자세한 정보는
        <a href="https://a2a-protocol.org/latest/" target="_blank" rel="noreferrer"
          >공식 문서</a
        >를 참고하세요.
      </div>
    </main>

    <div class="toast-container" aria-live="polite"></div>

    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
  </body>
</html>
